<%= form_with(model: route, local: true) do |form| %>
  <% if route.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(route.errors.count, "error") %> prohibited this route from being saved:</h2>

      <ul>
      <% route.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :title %>
    <%= form.text_field :title, id: :route_title %>
  </div>

  <div class="field">
    <%= form.label :route %>
    <%= form.text_field :route, id: :route_route %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>

<!-- Geolocalization -->

<button onclick="getLocation()">Record Route</button>

<button onclick="stopLocation()">Stop Record</button>

<p id="demo"></p>

<script>
var x = document.getElementById("demo");
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.watchPosition(showPosition);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
    console.log("Geolocation is not suppored");
  }
}
function showPosition(position) {
  x.innerHTML = "Latitude: " + position.coords.latitude +
  "<br>Longitude: " + position.coords.longitude;
  console.log(position);
}

function stopLocation() {
  var watchID;
  navigator.geolocation.clearWatch(watchID);
      console.log("Finished Geolocation");

}

</script>
